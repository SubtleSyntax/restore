<ion-view view-title="Re:Store">
  <ion-content>

    <div class="card" ng-if="showScan()">
      <div class="item item-divider">
        Scanned QR Data
      </div>
      <div class="item item-text-wrap" style="text-align:center;" ng-if="scanning">
        <ion-spinner></ion-spinner>
      </div>
      <div class="item item-text-wrap" ng-if="!scanning">
        <div ng-repeat="item in scanData">
          <strong>{{item.label}}</strong>: {{item.value}}
        </div>
      </div>
    </div>

    <div class="row" ng-if="showScanError()">
      <div class="col">
        <h4>Sorry, there was an error during Scan</h4>
        <p>Please make sure that you are scanning a QR Code and that you are lining up the code in the scanner carefully.</p>

        <a class="button button-block button-outline button-balanced" href="#/start">Go Back</a>
      </div>
    </div>


    <div class="row" ng-if="showSignPrompt()">
      <div class="col">
        <p>If the scanned data above is correct, please sign.</p>

        <button class="button button-block button-outline button-balanced" on-tap="sign()">Sign</button>
      </div>
    </div>

    <div class="card" ng-if="showSignature()">
      <div class="item item-divider">
        Signature
      </div>
      <div class="item item-text-wrap" style="text-align:center;" ng-if="signing">
        <ion-spinner></ion-spinner>
      </div>
      <div class="item item-text-wrap" ng-if="!signing">
        <img src="{{data.currentSignature}}" style="width:100%">
      </div>
    </div>

    <div class="row" ng-if="showSignError()">
      <div class="col">
        <h4>Sorry, there was an error during Signing</h4>

        <a class="button button-block button-outline button-balanced" href="#/start">Go Back</a>
      </div>
    </div>


    <div class="row" ng-if="showSavePrompt()">
      <div class="col">
        <button class="button button-block button-outline button-balanced" on-tap="save()">Save</button>
      </div>
    </div>


    <div class="row" ng-if="showSaveSuccess()">
      <div class="col">
        <h4>Signature has been recorded</h4>

        <a class="button button-block button-outline button-balanced" href="#/start">Return to Menu</a>
      </div>
    </div>


  </ion-content>
</ion-view>
